experiment_name: "AdaFLUX-LoRA-CIFAR10"
seed: 42

dataset:
  name: "CIFAR10"
  num_classes: 10
  num_clients: 15

  # We use tools/make_split.py (Dirichlet label-skew) in Colab
  split_generator: "DIRICHLET"
  non_iid_type: "label_skew"
  non_iid_level: "medium"
  out_dir: "data/cur_datasets"
  drifting: false

federated:
  rounds: 10
  fit_clients_per_round: 3
  eval_clients_per_round: 6
  ip: "127.0.0.1"
  port: 8080

model:
  base_model: "nateraw/vit-base-patch16-224-cifar10"

  lora_r: 8
  lora_alpha: 16
  lora_dropout: 0.1
  lora_target_modules: ["query", "key", "value"]

  # âœ… Real AdaLoRA schedule (step-based)
  # Choose tfinal ~ (local_epochs * steps_per_epoch). If unsure, 500/50 is a safe start.
  adalora_tinit: 0
  adalora_tfinal: 500
  adalora_deltaT: 50
  adalora_beta1: 0.85
  adalora_beta2: 0.85
  adalora_orth_reg: 0.0

training:
  batch_size: 8
  local_epochs: 2
  lr: 5e-4
  weight_decay: 0.05
  client_eval_ratio: 0.2

clustering:
  enabled: true
  algorithm: "dbscan"
  recluster_every: 3

logging:
  tensorboard: true
  save_checkpoints: true
